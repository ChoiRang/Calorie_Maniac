<!DOCTYPE html>
<html lang="en">
<meta charset="UTF-8">
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js"
        integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB"
        crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"
        integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13"
        crossorigin="anonymous"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
<link rel="stylesheet" href="{{ url_for('static', filename='css/common_style.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/loader.css') }}">
<script src="https://cdn.bootcss.com/jquery/3.0.0/jquery.min.js"></script>
<script type="text/javascript" src="https://assets.pyecharts.org/assets/echarts.min.js"></script>
<body class="h-100">
{% for daily_list in ['음식 목록,food_list', '운동 목록,exercise_list'] %}
    {% set list = daily_list.split(',')[1] %}
        {% if list == 'food_list' %}
            {% set kinds = food_list %}
        {% elif list == 'exercise_list' %}
            {% set kinds = exercise_list %}
        {% endif %}
<div class="border-teal">
    <div class="container mb-2">
        <div class="mt-3"></div>
        <span class="fs-5">{{ daily_list.split(',')[0] }}</span>
    </div>
    <div class="spr-line"></div>
    <main class="container mb-2">
        <div class="row">
            {% if kinds is defined %}
                {% if daily_list.split()[0] == '음식'%} {# 운동은 출력안됨 #}
                    {% for kind, nutrition in zip(kinds, food_nutrition) %} {# 나중에 zip 으로 출력(음식만) #}
                        <div class="mb-1">{{ kind.food_date }}</div>
                        <div class="col-5" style="float:left;">
                            <h6>{{ kind.food_name }}</h6>
                            <div class="inline">
                                <img src="{{ kind.food_image }}" alt="food_image" id="food_image" onerror="this.src='{{ url_for('static', filename='images/No_image_available.webp') }}'">
                                <div class="inline">
                                    탄수화물: {{ nutrition[0] }}g<br>
                                    단백질: {{ nutrition[1] }}g<br>
                                    지방: {{ nutrition[2] }}g<br>
                                    당류: {{ nutrition[3] }}g
                                </div>
                            </div>
                        </div>
                        <div id="pie{{kind.food_index}}" value="{{kind.food_index}}" style="width:400px; height:200px;"
                             class="col-7 pie-graph">
                            <script>
                                $(
                                    function () {
                                        var chart = echarts.init(document.getElementById('pie{{kind.food_index}}'), 'white', {renderer: 'canvas'});
                                        var url = "http://127.0.0.1:5000/main/dailyChart/{{kind.food_index}}";
                                        $.ajax({
                                            type: "GET",
                                            url: url,
                                            dataType: 'json',
                                            success: function (result) {
                                                chart.setOption(result);
                                            }
                                        });
                                    }
                                )
                            </script>
                        </div>
                    {% endfor %}
                {% endif %}
                <div class="col-12">
                    {% for kind, exec in zip(kinds, exercise_info) %} {# 나중에 zip 으로 출력(음식만) #}
                        {% if daily_list.split()[0] == '운동'%} {# 운동은 출력안됨 #}
                            <h6>{{ kind.exercise_name }}</h6>
                            <img src="{{ kind.exercise_image }}" alt="exercise_image" id="exercise_image" onerror="this.src='{{ url_for('static', filename='images/exercise_img/squat.png') }}'">
                            <div class="inline">
                            운동 일시: {{ exec[4] }}<br>
                            운동 시간: {{ exec[5] }}<br> 운동 횟수: {{ exec[6] }}<br>
                            소모 칼로리: {{ exec[7] }}<br> 획득 코인: {{ exec[8] }}<br>
                            </div>
                        {% else %}
                            <span class="fs-5">{{ daily_list.split()[0] }}이 등록되어 있지 않아요!</span>
                        {% endif %}
                    {% endfor %}
                </div>
            {% endif %}
        </div>
    </main>
</div>
{% endfor %}
</body>
</html>